# Title
Создание модуля конфигурации (config)

# Description
Реализовать чтение и парсинг hod.config.yml.

## Поля конфига

```yaml
tasksDir: ./tasks           # директория для задач (разрешается от файла конфига)
fields:
  Title:                   # ключ в markdown (# Title)
    name: title            # название для CLI (--title)
    required: true
  Description:             # предусмотрен системой
    name: description
  Status:
    name: status
    default: pending
  Priority:
    name: priority
  # ... кастомные поля
```

## Требования

- Обязательные поля: `tasksDir`, `fields` с минимум одним полем
- Ключ объекта `fields` = ключ в markdown (например `Title`)
- `name` обязателен — название для CLI аргументов (например `--title`)
- `Description` добавляется автоматически если не указан
- `Dependencies` — системное поле, не настраивается через конфиг
- Дубликаты ключей markdown → ошибка валидации
- Дубликаты `name` → ошибка валидации

## Валидация полей

Использовать **zod** для валидации.

Правила для markdown ключа (ключ объекта `fields`):
- Разрешено: латиница, цифры, дефисы, подчеркивания
- Запрещено: пробелы, спецсимволы
- Регистрозависимый
- Максимум 50 символов
- Регулярка: `^[A-Za-z0-9_-]{1,50}$`

Правила для `name`:
- Разрешено: латиница, цифры, дефисы
- Запрещено: пробелы, спецсимволы, подчеркивания (для kebab-case в CLI)
- Регистрозависимый
- Максимум 50 символов
- Регулярка: `^[a-z0-9-]{1,50}$` (только lowercase)

## Обработка ошибок

Кастомные классы ошибок:
```ts
class ConfigLoadError extends Error {
  constructor(message: string, public cause?: Error) {
    super(message);
    this.name = 'ConfigLoadError';
  }
}

class ConfigValidationError extends Error {
  constructor(public issues: z.ZodIssue[]) {
    super('Configuration validation failed');
    this.name = 'ConfigValidationError';
  }
}
```

## Отсутствие файла конфигурации

Если файл не найден:
- Использовать встроенные дефолты
- Не создавать файл автоматически (файл создается только через `hod init`)

Встроенные дефолты:
```ts
const DEFAULT_CONFIG: Config = {
  tasksDir: './tasks',
  fields: {
    Title: { name: 'title', required: true },
    Description: { name: 'description' },
    Status: { name: 'status', default: 'pending' },
  },
};
```

## Разрешение путей

- `tasksDir` разрешается относительно директории, где лежит `hod.config.yml`
- Если конфиг отсутствует — относительно `process.cwd()`
- Возвращать всегда абсолютный разрешенный путь
- Симлинки разрешены
- Несуществующая директория не проверяется при загрузке (создается при первой операции)
- Абсолютные пути поддерживаются
- Пути за пределами проекта разрешаются

## Кэширование

Не кэшировать. Каждый вызов `load()` перечитывает файл.

## Логгирование

Нет логгирования в v1. Ошибки → stderr, успех → stdout.

## Никаких лимитов

Нет ограничений на размер/сложность конфига в v1.

## ConfigService

```ts
interface FieldConfig {
  name: string;
  required?: boolean;
  default?: string;
}

interface Config {
  tasksDir: string;
  fields: Record<string, FieldConfig>;  // key = markdown ключ, value = конфиг поля
}

interface ConfigService {
  load(path?: string): Promise<Config>;
  validate(config: Config): void;
}
```

## Поведение validate()

- Проверяет zod схему
- Выбрасывает `ConfigValidationError` с issues от zod
- Не модифицирует объект

## Поведение load()

- Если `path` не указан — искать `hod.config.yml` в `process.cwd()`
- Не подниматься вверх по дереву
- Добавляет `Description` поле автоматически если отсутствует
- Возвращает `tasksDir` как абсолютный путь

## Обработка edge cases

- Пустой файл (0 байт) → использовать дефолты
- Только пробелы/комментарии → использовать дефолты
- Невалидный YAML → `ConfigLoadError`
- `fields: {}` или `fields: null` → ошибка валидации (нужен минимум `Title`)
- Неизвестные поля в корне → ошибка валидации (strict mode)
- `tasksDir` в `fields` → разрешено (разные контексты)

## Тесты

Unit тесты:
- Все методы ConfigService
- Валидация markdown ключей
- Валидация name (kebab-case)
- Дубликаты ключей и name
- Отсутствующие/пустые файлы
- Кастомные поля

Integration тесты:
- С реальной ФС через временные директории
- Edge cases: пустой файл, невалидный YAML, спецсимволы
- Разрешение путей (относительные, абсолютные)

# DependsOn
1, 11

# Priority
high
